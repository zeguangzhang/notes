最近开始做文本疾病识别，和文本科室识别。主要对两个项目做一些工作总结。
- 文本疾病识别：这个项目需要识别21种常见疾病，分类准确率最终96%
- 文本科室识别：这个项目

# 文本疾病识别：
##  训练集应该是什么样的？
训练集应该是粗糙的，不应该用严格的标签过滤，一开始标签就是用一些人工总结发现的一些疾病特征去过滤，最后导致了模型过拟合（过拟合说白了，最后识别出来也都是带有刚才的那些标签的，成规则匹配啦），
其实我们应该选择一个粗略的标签过滤就可以啦，细想一下，我们的模型实质就是发现你标记的那些关联疾病的细致标签，是让模型从数据中知识发现的过程，而不是我们自己去知识发现。
比如我们对于乳腺癌的分类用乳腺过滤下样本就可以啦，过滤结直肠癌症，过滤下直肠就可以啦，看看样本做做微调就可以啦，比如结直肠癌是不是过滤肠就可以啦，能过滤出来且保证质量前提下样本更全面。
训练集应该这样过滤也是跟前同事聊天跟我说下了训练样本是这个样子的，加上上几天领导说我过拟合了，我就知道怎么做了。
## 训练集多大？
训练集从1600w数据中过滤出的数据集300万，样本分布如下：
```json{'新冠肺炎': 2694, '鼻咽癌': 12235, '食管癌': 30354, '胰腺癌': 33410, '膀胱癌': 41313, '子宫内膜癌': 42805, '口腔癌': 68665, '甲状腺癌': 79797, 
'淋巴瘤': 86923, '卵巢癌': 96763, '前列腺癌': 118306, '乳腺癌': 124190, '皮肤癌': 154632, '胆囊癌': 183838, '肺癌': 258017, '肾细胞癌': 304776, 
'脑瘤': 355570, '结直肠癌': 387242, '胃癌': 444175, '肝癌': 501140, '宫颈癌': 947527}
```
但是由于样本分布数量悬殊，所以我们需要均衡处理，按照可接受最小的数值进行均匀分布，我们采用了鼻咽癌的数字12235，因为贝叶斯是会受到样本均衡性的影响的，所以我们这里暂且均匀，
其他有没有算法对样本均衡这块可以后期做研究。

## 训练样本是否携带足够的知识:
没有。给我的训练集合都太短，而且好多被截断（反馈过截断的情况，领导说样本就是这样的，不是故意截断的），在加上是ugc内容，所以信息量太少，基本都是知道一种疾病名以下几种句式提问：
- 为什么会得xx病
- 如何治疗xx病
- xx病用什么药
上面只是列举了几个样例，反正就类似与这样产生了好多句式，每种疾病都差不多，很少带有 '疾病名 + 体现疾病特征的词'这样的句子，所以样本知识性不够，不适合走模型训练，如果强行走模型训练结果也不好，
跟走规则等同，最终也就是直接说疾病名的能识别出来，其他识别不出来。所以携带知识足够的样本可以走算法模型，不然没必要，比如判断乳腺癌，那写个规则 这个句子既出现乳腺又出现癌就认为是乳腺癌就可以了。

## 上述样本携带知识不够情形下，你们做了哪些处理？
从癌症相关性来说，任何xx癌症相关的xx疾病都是导致癌症的强因素，所以我们按照这个做的模型，但是最后感觉把xx疾病就识别为xx癌确实有点过重了，所以最后领导建议分为两个置信度1，2，1表示强关联，2表示确定是这个疾病。
也就是说，我们原来训练的模型属于置信度1的，我们需要训练一般置信度2的，要做的就是过滤一下样本，这下用'疾病部位 + 癌'来过滤样本，训练就可以啦。

## 你们用了哪个框架训练的？测试时每次训练模型都要重跑吗？
框架用scikit-learn,官网有些bayes和svm的文本分类例子。每次模型训练完肯定序列化保存，所以每次测试时只是反序列化一下就可以。

# 文本科室识别
手写bayes:网上例子吃内存： ，取消log平滑处理，没有词出现认为出现了一次，样本层面的考虑，分词选择（糖筛，和产检字节分词能对，jieba默认不能）。